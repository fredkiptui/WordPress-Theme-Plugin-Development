!function(){document.addEventListener("DOMContentLoaded",(()=>{if(!window.gutenaNewsletterBlock)return;let n=document.querySelectorAll(".gutena-newsletter-form-block .gutena-newsletter-form");for(let s=0;s<n.length;s++)n[s]?.addEventListener("submit",(function(a){a.preventDefault();let l=n[s],r=l?.nextElementSibling,i=l.querySelector("#gutena-newsletter-field").value,o=l.querySelector("#gutena-newsletter-settings").value;if(r&&"undefined"!==r&&r.classList.contains("gutena-newsletter-message")&&r.remove(),!t(i))return void e(l,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.email_invalid}</span>`,className:"gutena-newsletter-message status error"});e(l,{innerHTML:`<span class="loader"></span><span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.in_process}</span>`,className:"gutena-newsletter-message success"});const c=new FormData;c.append("action","gutena_subscribe_newsletter"),c.append("nonce",gutenaNewsletterBlock.nonce),c.append("email",i),c.append("data",o),fetch(gutenaNewsletterBlock?.ajax_url,{method:"POST",credentials:"same-origin",body:c}).then((e=>e.json())).then((t=>{t&&(l?.nextElementSibling?.classList.contains("gutena-newsletter-message")&&l.nextElementSibling.remove(),"success"==t.status&&(l.querySelector("#gutena-newsletter-field").value=""),e(l,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${t.message}</span>`,className:"gutena-newsletter-message status "+t.status}))})).catch((t=>{e(l,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${t}</span>`,className:"gutena-newsletter-message error"})}))}))}));const e=(e,t)=>{e.after(Object.assign(document.createElement("div"),t))},t=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}();